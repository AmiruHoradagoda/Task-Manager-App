<!-- Show full layout for authenticated routes -->
<div class="app-container" *ngIf="shouldShowLayout()">
  <!-- Header with sidenav toggle -->
  <app-header (toggleSidenav)="toggleSidenav()"></app-header>

  <!-- Main Content with Sidenav -->
  <mat-sidenav-container class="app-sidenav-container">
    <!-- Side Navigation -->
    <mat-sidenav #sidenav mode="over" class="app-sidenav" [opened]="false" [fixedInViewport]="true" [fixedTopGap]="64">
      <mat-nav-list>
        <a mat-list-item routerLink="/tasks" routerLinkActive="active-link">
          <mat-icon matListItemIcon>assignment</mat-icon>
          <span matListItemTitle>Tasks</span>
        </a>
        <a mat-list-item routerLink="/tasks/new" routerLinkActive="active-link">
          <mat-icon matListItemIcon>add_circle</mat-icon>
          <span matListItemTitle>New Task</span>
        </a>
      </mat-nav-list>
    </mat-sidenav>
    
    <!-- Content Area -->
    <mat-sidenav-content class="app-content">
      <div class="content-wrapper">
        <router-outlet></router-outlet>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>

<!-- Show only router outlet for auth pages -->
<div class="auth-container" *ngIf="!shouldShowLayout()">
  <router-outlet></router-outlet>
</div>